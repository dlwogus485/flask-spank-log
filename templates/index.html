{% extends "base.html" %}

{% block title %}홈{% endblock %}

{% block content %}
<div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-2xl mx-auto text-center">
  <h2 class="text-3xl font-bold text-gray-800 mb-6">환영합니다, {{ session['username'] }}님!</h2>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="mb-6">
        {% for category, message in messages %}
          <div class="p-3 rounded-lg text-sm {% if category == 'success' %}bg-green-100 text-green-700{% elif category == 'error' %}bg-red-100 text-red-700{% elif category == 'warning' %}bg-yellow-100 text-yellow-700{% else %}bg-blue-100 text-blue-700{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <div class="space-y-4">
    {% if session.get('role') == 'sub' %}
      <a href="{{ url_for('commute_auth') }}" class="block w-full bg-blue-500 text-white py-3 rounded-lg font-semibold hover:bg-blue-600 transition duration-300 shadow-md">
        출근인증 제출
      </a>
      <a href="{{ url_for('payments') }}" class="block w-full bg-purple-500 text-white py-3 rounded-lg font-semibold hover:bg-purple-600 transition duration-300 shadow-md">
        소액결제 명세서 제출
      </a>
      <a href="{{ url_for('cardio') }}" class="block w-full bg-orange-500 text-white py-3 rounded-lg font-semibold hover:bg-orange-600 transition duration-300 shadow-md">
        유산소 운동 인증
      </a>
      <a href="{{ url_for('weight') }}" class="block w-full bg-yellow-500 text-white py-3 rounded-lg font-semibold hover:bg-yellow-600 transition duration-300 shadow-md">
        체중 기록
      </a>
      <a href="{{ url_for('request_punishment') }}" class="block w-full bg-pink-500 text-white py-3 rounded-lg font-semibold hover:bg-pink-600 transition duration-300 shadow-md">
        체벌/교육 일정 요청
      </a>
      <a href="{{ url_for('upload_punishment_evidence') }}" class="block w-full bg-indigo-500 text-white py-3 rounded-lg font-semibold hover:bg-indigo-600 transition duration-300 shadow-md">
        체벌/교육 증거 업로드
      </a>
      <a href="{{ url_for('penalties') }}" class="block w-full bg-red-500 text-white py-3 rounded-lg font-semibold hover:bg-red-600 transition duration-300 shadow-md">
        벌점 내역 보기
        {% if show_penalty_warning %}<span class="ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full">!</span>{% endif %}
      </a>
      <a href="{{ url_for('calendar_view') }}" class="block w-full bg-green-500 text-white py-3 rounded-lg font-semibold hover:bg-green-600 transition duration-300 shadow-md">
        캘린더 보기
      </a>
    {% endif %}

    {% if session.get('role') == 'owner' %}
      <a href="{{ url_for('admin_dashboard') }}" class="block w-full bg-blue-700 text-white py-3 rounded-lg font-semibold hover:bg-blue-800 transition duration-300 shadow-md">
        관리자 대시보드
      </a>
      <a href="{{ url_for('admin_punishment_requests') }}" class="block w-full bg-pink-700 text-white py-3 rounded-lg font-semibold hover:bg-pink-800 transition duration-300 shadow-md">
        체벌/교육 요청 관리
      </a>
      <a href="{{ url_for('admin_data_management') }}" class="block w-full bg-gray-700 text-white py-3 rounded-lg font-semibold hover:bg-gray-800 transition duration-300 shadow-md">
        댕댕님 모든 기록 관리 (삭제 기능 포함)
      </a>
      <a href="{{ url_for('calendar_view') }}" class="block w-full bg-green-700 text-white py-3 rounded-lg font-semibold hover:bg-green-800 transition duration-300 shadow-md">
        캘린더 보기
      </a>
      <form action="{{ url_for('check_daily_weekly_penalties') }}" method="post" class="mt-4">
        <button type="submit" class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700 transition duration-300 shadow-md text-sm">
          수동 벌점 확인 (유산소, 소액결제, 체중)
        </button>
      </form>
    {% endif %}

    <a href="{{ url_for('logout') }}" class="block w-full bg-gray-300 text-gray-800 py-3 rounded-lg font-semibold hover:bg-gray-400 transition duration-300 shadow-md mt-6">
      로그아웃
    </a>
  </div>
</div>
{% endblock %}

