{% extends "base.html" %}

{% block title %}체벌/교육 일정 요청{% endblock %}

{% block content %}
<div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-2xl mx-auto">
  <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">체벌/교육 일정 요청</h2>
  
  <div class="bg-red-50 border border-red-200 p-4 rounded-lg mb-6 text-center">
    <p class="text-lg font-semibold text-red-700">현재 총 벌점: {{ total_penalty_points }}점</p>
  </div>

  <p class="text-gray-600 text-sm mb-6">차감하고 싶은 벌점(1점=1시간)과 희망 일시를 선택하고 사유를 제출해주세요. 관리자의 승인 후 일정이 확정됩니다.</p>

  <form method="post" action="{{ url_for('request_punishment') }}" class="space-y-6">
    <div>
      <label for="points_to_resolve" class="block text-sm font-medium text-gray-700 mb-1">차감할 벌점 (시간)</label>
      <input type="number" id="points_to_resolve" name="points_to_resolve" required min="1" max="{{ total_penalty_points }}"
             placeholder="차감할 벌점을 숫자로 입력 (예: 5)"
             class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
    </div>
    <div>
      <label for="requested_datetime" class="block text-sm font-medium text-gray-700 mb-1">희망 일시</label>
      <input type="datetime-local" id="requested_datetime" name="requested_datetime" required
             class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
    </div>
    <div>
      <label for="reason" class="block text-sm font-medium text-gray-700 mb-1">요청 사유</label>
      <textarea id="reason" name="reason" rows="4" placeholder="체벌/교육을 요청하는 사유를 입력하세요." required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y"></textarea>
    </div>
    <div>
      <label for="requested_tool" class="block text-sm font-medium text-gray-700 mb-1">희망 도구 (선택 사항)</label>
      <select id="requested_tool" name="requested_tool"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        <option value="">-- 선택 안 함 --</option>
        {% for tool in spanking_tools %}
          <option value="{{ tool }}">{{ tool }}</option>
        {% endfor %}
      </select>
    </div>

    <button type="submit"
            class="w-full bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 transition duration-300 shadow-md">
      일정 요청 제출
    </button>
  </form>

  <div class="mt-8 text-center space-x-4">
    <a href="{{ url_for('home') }}" class="inline-block text-blue-600 hover:underline font-medium">홈으로</a>
  </div>
</div>
{% endblock %}

